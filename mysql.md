### Таблицы
##### Именование
Важно понимать, что имя таблицы напрямую зависит от структуры базы данных
И, согласно правилам нормализации, структура эта максимум разобщена:
* база данных разбита на таблицы
* таблицы хранят сущности
* сущности не хранятся вперемежку - в каждой таблице хранится одна сущность

Имя таблицы должно отражать ее сущность. Это главное требование.
Сущности не следует сокращать - не надо писать "u" вместо "user", потому что потом придется ползать по документации, искать что такое "u".

Имя таблицы определяется структурой базы данных и одновременно описывает эту структуру.

В идеале, впервые взглянув на имена таблиц и их иерархию, структура должна быть сразу понятна.
Это позволяет сразу начать работать с такой базой данных новым админам,
и не думать о структуре текущим админам - наглядно видно что где лежит.

Посмотрим на это на практике, рассмотрев простенькую базу данных:
* таблица c_auth_user:
  * "c" - таблица относится к структурам ядра, "core"
  * "auth" - таблица относится к подсистеме авторизации
  * "user" - таблица хранит сущность user, "пользователь"
* таблица c_auth_group:
  * "c" - таблица относится к структурам ядра, "core"
  * "auth" - таблица относится к подсистеме авторизации
  * "group" - таблица хратит сущность group, "группа", подсистемы авторизации 

В БД может быть множество других сущностей "группа", но эта именно группа авторизации, что ясно отражает название таблицы

Тоже самое справедливо для сущности "пользователь"

* таблица c_auth_user_group:
  * "c" - таблица относится к структурам ядра, "core"
  * "auth" - таблица относится к подсистеме авторизации
  * "user_group" - таблица хранит сущность user_group, это связь "пользователь-группа", или, как читается "группа пользователя"

Последняя таблица предназначена для хранения связей, групп пользователя, но в имени отражена только одиночная сущность - группа пользователя.
Потому, что таблица хранит именно одну сущность - группу пользователя.

Описываем только сущность, а не сущности - таблица всегда хранит одну сущность, и это должно ясно читаться.


##### Нормализация данных
База данных - это большая информационная структура, блок данных.

Нормализация данных - это упорядочивание структуры.
В процессе упорядочивания избавляются от избыточности, упрощают связи, и неизбежно оптимизируют структуру.

В сети под термином "Нормализация данных" понимают алгоритм упорядочивания данных.
С каждым его шагом энтропия (хаотичность) базы данных падает, а порядок растет.
Собственно уровень нормализации и отражает степень порядка, степень чистоты структуры базы данных.
<br>Cтитьи про нормализацию: [1](https://habr.com/post/254773/), [2](https://www.wwwmaster.ru/13-internet-i-bazy-dannyh-chast-02-normalizaciya-bazy-dannyh)

Нормализация сводится к разбиению структуры на отдельные простые законченные и независимые сущности, кирпичики, из которых складывается вся структура, и связи между ними.

На практике иногда следует денормализовать некоторые таблицы, усложнить структуру, увеличить избыточность данных, все это ради производительности
Например можно хранить "лишние" данные, доступные из других таблиц, в той таблице, откуда чаще всего происходит выборка - выборка строки из одной таблицы намного быстрее, чем сборка этой строки из нескольких таблиц.

Также во время нормализации помним про индексы и внешние ключи:
* те поля, по которым запрашиваются данные, желательно вносить в индексы, индексировать, это намного ускоряет поиск, за счет небольшого увеличения размера таблицы.
* для полей, которые дублируют (в результате денормализации или как связь) поля в других таблицах, желательно устанавливать внешний ключ, он создает связь, и позволяет таблице автоматически обслуживать саму себя, без необходимости контролировать ее целостность снаружи

##### Внешние ключи

Как работают внешние ключи, наглядно показано [здесь](https://ru.wikipedia.org/wiki/Внешний_ключ)

Внешний ключ - это связь между таблицами. Он устанавливается у той таблицы, поле в которой ссылается (или отображает) такое-же поле в другой таблице.

Внешний ключ устанавливается только для зависимых таблиц:
* c_auth_user - таблица с сущностью "пользователь", хранит:
  * id - идентификатор пользователя
  * login
  * password
  * email
  * name
  * и т.п. информацию о пользователе
* c_auth_group - таблица с сущностью "группа", хранит:
  * id - идентификатор группы
  * name
  * description
  * privilegies
  * и т.п. информацию о группе
* c_auth_user_group - таблица с сущностью "группа пользователя", хранит:
  * user_id - идентификатор пользователя
  * group_id - идентификатор группы
Обратим внимание на последнюю таблицу - она хранит ссылки на поля из других таблиц.

Что такое ссылка, или связь?

Ссылка - это сущность, подобная нити, имеющая два (или более) конца.
Она валидна только в том случае, если все концы соответствуют друг другу.
Если же поменялся один конец - должны поменяться и остальные, чтобы ссылка осталась валидной.

Т.е. если мы изменим идентификатор пользователя или группы - в сущностях пользователя или группы идентификаторы изменятся, а в сущности ссылка - нет.
Т.е. идентификаторы в таблице c_auth_user_group не

##### Индексы

[теория](https://ruhighload.com/Индексы+в+mysql)